# Shared config applied to all sites via --config flag

# Safe global toggles
pruneTaxonomies = true
trailingSlash  = "never"

[markup]
  [markup.goldmark]
    [markup.goldmark.renderer]
      unsafe = true
    [markup.goldmark.parser]
      [markup.goldmark.parser.attribute]
        block = true
        inline = true
        title = true

# Silence noisy raw HTML warnings; content relies on renderer unsafe
ignoreLogs = ['warning-goldmark-raw-html']

[outputFormats.TagsJSON]
  mediaType   = "application/json"
  baseName    = "tags"
  isPlainText = true

[outputFormats.FORMS]
  mediaType   = "application/json"
  baseName    = "forms"
  isPlainText = true
  path        = ".well-known"

[outputs]
  home     = ["HTML", "RSS", "JSON", "FORMS"]
  section  = ["HTML"]
  taxonomy = ["HTML", "JSON"]

[taxonomies]
  tag = "tags"

[params.section.defaults]
  max   = "xl"
  pad   = "lg"
  y     = "none"
  align = "start"

[params.header]
  # Standardized logo size across sites; navbar uses this height class and intrinsic pixel height
  logoHeight   = "h-10"   # Tailwind height class for layout sizing
  logoWidth    = 0         # Let height drive intrinsic dimensions; 2x DPR handled in partial
  logoHeightPx = 40        # Intrinsic height attribute for CLS prevention (matches h-10)

[params.analytics]
  # Standardized lazy-load behavior for analytics across all sites
  # Load GA/Clarity/etc after first interaction or small delay to improve Core Web Vitals.
  # We include "click" to minimize the chance of losing the first navigation click.
  delayMs = 3000
  loadEvents = ["scroll", "mousemove", "touchstart", "click"]

[params.imageDefaults]
  # Reasonable default presentation for content images rendered via Markdown
  # - Keep images responsive but capped so the browser doesnâ€™t pick over-large candidates
  # - You can override per image using `{ sizes="..." class="..." }` in Markdown
  defaultClasses = "rounded-lg w-full max-w-2xl mx-auto block"
  # Cap effective display width on larger screens; let mobile stay full-viewport
  # Tune these if your sites have different content widths
  defaultSizes   = "(min-width:1536px) 800px, (min-width:1024px) 720px, (min-width:768px) 600px, 100vw"

[module]
  [[module.mounts]]
    source = "static"
    target = "static"

  [[module.mounts]]
    source = "content"
    target = "content"

  [[module.mounts]]
    source = "media"
    target = "static/media"

  [[module.mounts]]
    source = "media"
    target = "assets/media"

  [[module.mounts]]
    source = "posts"
    target = "content/posts"
