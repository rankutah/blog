# Shared config applied to all sites via --config flag

# Safe global toggles
pruneTaxonomies = true
trailingSlash  = "never"
theme = ["overrides"]
enableRobotsTXT = true

[markup]
  [markup.goldmark]
    [markup.goldmark.renderer]
      unsafe = true
    [markup.goldmark.parser]
      [markup.goldmark.parser.attribute]
        block = true
        inline = true
        title = true

# Silence noisy raw HTML warnings; content relies on renderer unsafe
ignoreLogs = ['warning-goldmark-raw-html']

[outputFormats.TagsJSON]
  mediaType   = "application/json"
  baseName    = "tags"
  isPlainText = true

[outputFormats.FORMS]
  mediaType   = "application/json"
  baseName    = "forms"
  isPlainText = true
  path        = ".well-known"

[outputs]
  home     = ["HTML", "RSS", "JSON", "FORMS"]
  section  = ["HTML"]
  taxonomy = ["HTML", "JSON"]

## Default layout cascade: use Flowbite across common kinds
## Sites can override via front matter or local cascades if needed.
[[cascade]]
  layout = "flowbite"
  [cascade._target]
    kind = "page"

[[cascade]]
  layout = "flowbite"
  [cascade._target]
    kind = "home"

[[cascade]]
  layout = "flowbite"
  [cascade._target]
    kind = "taxonomy"

[[cascade]]
  layout = "flowbite"
  [cascade._target]
    kind = "taxonomyTerm"

[params]
  # Centralized default theme behavior; sites may override locally.
  defaultTheme = "auto"
  disableThemeToggle = false

[params.motion]
  enabled = true

[params.faqs]
  headingLevel = 3

[params.messageModal]
  enable = false

[params.messageFab]
  enable = true
  text = "Message"
  showIcon = true
  showTextMobile = false

[taxonomies]
  tag = "tags"

[params.section.defaults]
  max   = "xl"
  pad   = "lg"
  y     = "none"
  align = "start"

[params.header]
  # Standardized logo size across sites; navbar uses this height class and intrinsic pixel height
  logoHeight   = "h-12"   # Tailwind height class for layout sizing
  logoWidth    = 0         # Let height drive intrinsic dimensions; 2x DPR handled in partial
  logoHeightPx = 48        # Intrinsic height attribute for CLS prevention (matches h-12)

  # Global navbar layout defaults (Blue Ridge Abbey pattern)
  # - Brand (logo/title) stays on the far left
  # - Actions (search + CTA) stay on the far right
  centerNav = false
  rightMenu = false

[params.analytics]
  # Shared default: load after a 5s timer OR on first interaction.
  # Sites can set `params.analytics.delayMs = 0` to force immediate load.
  delayMs = 5000
  loadEvents = ["scroll", "mousemove", "touchstart", "click", "keydown"]
  onlyOnInteraction = false

[params.imageDefaults]
  # Reasonable default presentation for content images rendered via Markdown
  # - Keep images responsive but capped so the browser doesnâ€™t pick over-large candidates
  # - You can override per image using `{ sizes="..." class="..." }` in Markdown
  defaultClasses = "rounded-lg w-full max-w-2xl mx-auto block"
  # Cap effective display width on larger screens; let mobile stay full-viewport
  # Tune these if your sites have different content widths
  defaultSizes   = "(min-width:1536px) 800px, (min-width:1024px) 720px, (min-width:768px) 600px, 100vw"

[permalinks]
  # Standard blog permalink pattern; applies if a site mounts a blog section.
  blog = "/blog/:contentbasename"

[module]
  [[module.mounts]]
    source = "static"
    target = "static"

  [[module.mounts]]
    source = "content"
    target = "content"

  [[module.mounts]]
    source = "media"
    target = "static/media"

  [[module.mounts]]
    source = "media"
    target = "assets/media"

  # Do NOT mount project-root posts into all sites; keep per-site mounts

# noop: rebuild trigger 2025-11-14
# noop: rebuild trigger 2025-11-14 (2)
# noop: rebuild trigger 2025-11-14 (3)

# noop: rebuild trigger 2025-12-09 17:24
