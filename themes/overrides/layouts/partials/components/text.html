{{- /* layouts/partials/components/text.html */ -}}
{{- $page := .page -}}
{{- $comp := .comp -}}

{{- /* 1) Compute wrapper classes (normal text) */ -}}
{{- $defaultWrapper := partial "get-classes.html" (dict
    "page"     $page
    "comp"     $comp
    "paramKey" "text"
    "fallback" "mb-3 text-gray-500 dark:text-gray-400"
) -}}
{{- /* allow override via comp.textClasses */ -}}
{{- $wrapper := default $defaultWrapper $comp.textClasses -}}

{{- /* 2) Compute bold & link classes */ -}}
{{- $defaultBold := "font-semibold text-gray-900 dark:text-white" -}}
{{- $defaultLink := "font-medium text-blue-600 underline dark:text-blue-500 dark:hover:text-blue-600 hover:text-blue-700 hover:no-underline" -}}
{{- $boldClasses := default $defaultBold $comp.boldClasses -}}
{{- $linkClasses := default $defaultLink $comp.linkClasses -}}

{{- /* 3) Render Markdown â†’ HTML */ -}}
{{- $raw  := $comp.text | default "Your text here." -}}
{{- $html := $raw | markdownify -}}

{{- /* 4) Inject classes into <strong> */ -}}
{{- $html = replaceRE `(?i)<strong>(.*?)</strong>` (printf `<strong class="%s">$1</strong>` $boldClasses) $html -}}

{{- /* 5) Inject classes into <a> */ -}}
{{- $html = replaceRE `(?i)<a href="([^"]+)"` (printf `<a class="%s" href="$1"` $linkClasses) $html -}}

{{- /* 6) Inject classes into <ul> */ -}}
{{- $html = replaceRE `(?i)<ul>` `<ul class="list-disc pl-5 space-y-2">` $html -}}

{{- /* 7) Inject classes into <ol> */ -}}
{{- $html = replaceRE `(?i)<ol>` `<ol class="list-decimal pl-5 space-y-2">` $html -}}

<div class="{{ $wrapper }}">
  {{- $html | safeHTML -}}
</div>
