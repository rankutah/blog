{{- /* layouts/partials/components/section.html */ -}}
{{- $page := .page -}}
{{- $sec  := .section -}}

{{- /* 1) Wrapper: check sec.classes → params.section.classes → fallback */ -}}
{{- $wrapper := partial "get-classes.html" (dict
    "page"     $page
    "comp"     $sec
    "paramKey" "section"
    "fallback" "container mx-auto px-4 sm:px-6 lg:px-8 py-12"
) -}}

{{- /* 2) Grid: first look for a per‑section YAML override */ -}}
{{- $gridOverride := default "" $sec.gridClasses -}}
{{- /* then compute: if override is non‑empty, use that; else use helper */ -}}
{{- $grid := cond
     (ne $gridOverride "")
     $gridOverride
     (partial "get-classes.html" (dict
         "page"     $page
         "comp"     $sec
         "paramKey" "sectionGrid"
         "fallback" "grid grid-cols-1 lg:grid-cols-1 gap-6 justify-items-center"
     ))
 -}}

{{- if $sec.components }}
<section class="{{ $wrapper }}">
  <div class="{{ $grid }}">
    {{- range $sec.components }}
      {{- partial (printf "components/%s.html" (lower .type)) (dict "page" $page "comp" .) }}
    {{- end }}
  </div>
</section>
{{- else }}
  {{- /* fallback to raw page content */ -}}
  {{- $page.Content }}
{{- end }}
