{{- /* layouts/shortcodes/col.html
     Single column (renders Markdown once)

     Props:
       card="true|false"  → if true, just apply card visuals on a wrapper div
       classes="…"        → extra utility classes on this tile (works in both modes)

     Notes:
       - No max-width, no auto-centering, no link-wrapping.
       - Card just adds bg/border/padding/shadow so it behaves like a normal column.
*/ -}}

{{- $page   := .Page -}}
{{- $inner  := .InnerDeindent | strings.TrimSpace -}}
{{- $isCard := eq (lower (.Get "card" | default "false")) "true" -}}
{{- $extra  := .Get "classes" | default "" -}}

{{- /* Site override for card style (optional) */ -}}
{{- $siteCard := $page.Site.Params.col.cardClasses | default "" -}}
{{- $cardBase := "w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm p-6 text-left" -}}
{{- $card := cond (ne $siteCard "") $siteCard $cardBase -}}
{{- if ne $extra "" }}{{ $card = printf "%s %s" $card $extra }}{{ end -}}

{{- /* Render Markdown (and nested shortcodes) exactly once */ -}}
{{- $html := $page.RenderString $inner -}}

{{- if $isCard -}}
  <div class="{{ $card }}">
    {{- $html -}}
  </div>
{{- else -}}
  <div{{ with $extra }} class="{{ . }}"{{ end }}>
    {{- $html -}}
  </div>
{{- end -}}
