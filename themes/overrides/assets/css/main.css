/* ========== 1) Base CSS imports (Flowbite removed) ========== */

/* Tailwind v4: define variants BEFORE importing Tailwind so `dark:` is selector-based
  (matches our JS-controlled `.dark` class / `data-theme="dark"`) rather than OS media queries. */
@import "themes/overrides/assets/css/_variants.css";

/* ========== 2) Tailwind v4 layers (uses tailwind.config.cjs) ========== */
@import "tailwindcss";

@plugin "@tailwindcss/typography";
/* Flowbite plugin removed */

/* ========== 3) PaperMod/menu tweak (safe to remove if/when you drop PaperMod) ========== */
.header .nav #menu li > a > span + svg,
.header .nav #menu li > a svg.ml-1.inline-block.flex-shrink-0 {
  display: none !important;
}

/* ===== ULTIMATE OVERRIDE (plain CSS, keep at physical end of file) =====
  Ensures our desired colors are not reordered by Tailwind's layer processing.
  Goal: Placeholder same in light/dark (#9ca3af); typed text white in dark mode, dark slate in light.
*/
.cp-contact input[type="text"],
.cp-contact input[type="email"],
.cp-contact input[type="tel"],
.cp-contact input[type="search"],
.cp-contact input[type="url"],
.cp-contact input[type="password"],
.cp-contact textarea { color: #111827 !important; }

/* Unified placeholder both modes */
.cp-contact input[type="text"]::placeholder,
.cp-contact input[type="email"]::placeholder,
.cp-contact input[type="tel"]::placeholder,
.cp-contact input[type="search"]::placeholder,
.cp-contact input[type="url"]::placeholder,
.cp-contact input[type="password"]::placeholder,
.cp-contact textarea::placeholder { color: #9ca3af !important; opacity: 1 !important; }

/* Dark mode text color enforcement (covers .dark class or data-theme attr) */
.dark .cp-contact input[type="text"],
.dark .cp-contact input[type="email"],
.dark .cp-contact input[type="tel"],
.dark .cp-contact input[type="search"],
.dark .cp-contact input[type="url"],
.dark .cp-contact input[type="password"],
.dark .cp-contact textarea,
[data-theme="dark"] .cp-contact input[type="text"],
[data-theme="dark"] .cp-contact input[type="email"],
[data-theme="dark"] .cp-contact input[type="tel"],
[data-theme="dark"] .cp-contact input[type="search"],
[data-theme="dark"] .cp-contact input[type="url"],
[data-theme="dark"] .cp-contact input[type="password"],
[data-theme="dark"] .cp-contact textarea { color: #ffffff !important; }

/* Scroll-to-top link (PaperMod default) — ensure sane size/position/hidden initial state */
.top-link {
  display: none !important; /* replaced by floating Text button */
}
/* legacy styles removed */

/* Footer styling: subtle divider + spacing + centered width */
.footer {
  margin-top: 1.5rem;
  padding: 1rem 1rem; /* tighter top/bottom */
  /* Border comes from Tailwind classes on the element (matches navbar) */
}
.shortcode-gallery { align-items: start; }
.shortcode-gallery > div { padding: 0 !important; line-height: 0; }
.shortcode-gallery a { display: block; line-height: 0; }
.shortcode-gallery img { display: block; margin: 0 !important; vertical-align: top; }


.dark .footer { }
.footer .prose {
  max-width: 72rem !important; /* ~1152px */
  margin-left: auto;
  margin-right: auto;
}
.footer .prose.max-w-none { max-width: none !important; }
.footer .prose > :first-child { margin-top: 0 !important; }
/* underline only normal text links; do not underline button-style anchors */
.footer .prose a:not(.not-prose):not(.ui-btn):not(.no-underline) { text-decoration: underline; }


/* Make list markers match the current text color */
.prose :where(ul > li)::marker { color: currentColor; }
.prose :where(ol > li)::marker { color: currentColor; }

/* Hero typography defaults: white by default, but allow utility classes (e.g. text-black) to override */
.section.hero .prose {
  color: #ffffff;
  --tw-prose-body: #ffffff;
  --tw-prose-headings: #ffffff;
  --tw-prose-links: #ffffff;
}
.section.hero .prose a { color: inherit; }
.section.hero .prose a.cp-hero-link,
.section.hero .prose a.cp-hero-link:hover {
  text-decoration: none;
}

/* Kandee Myers: "Why I Am Running" hero links */
.section.hero .km-why-running-hero a.cp-hero-link,
.section.hero .km-why-running-hero a.cp-hero-link:hover {
  color: #f5f4eb;
}

/* On very small screens, reduce type size so the hero overlay doesn't overflow/scroll. */
@media (max-width: 767px) {
  .section.hero .km-why-running-hero {
    gap: clamp(0.6rem, 2.2vh, 1rem);
  }
  .section.hero .km-why-running-hero h2 {
    font-size: clamp(1.5rem, 6.6vw, 2.25rem);
    line-height: 1.08;
  }
}

@media (max-width: 767px) and (max-height: 700px) {
  .section.hero .km-why-running-hero h2 {
    font-size: clamp(1.25rem, 6.2vw, 2rem);
  }
}

/* iPhone SE-ish: small + short — shrink a bit more. */
@media (max-width: 375px) and (max-height: 700px) {
  .section.hero .km-why-running-hero {
    gap: clamp(0.45rem, 1.7vh, 0.75rem);
  }
  .section.hero .km-why-running-hero h2 {
    font-size: clamp(1.1rem, 5.7vw, 1.65rem);
    line-height: 1.04;
  }
}

/* Exact iPhone SE (1st gen) viewport: 320×568. */
@media (max-width: 320px) and (max-height: 568px) {
  .section.hero .km-why-running-hero {
    gap: 0.4rem !important;
  }

  .section.hero .km-why-running-hero h2 {
    font-size: 1.2rem !important;
    line-height: 1.02 !important;
    letter-spacing: -0.02em;
  }
}

.section.hero .km-why-running-hero a.cp-hero-link:hover {
  text-decoration: underline;
  text-underline-offset: 6px;
}

/* Motion: allow skipping all animations after first view */
html[data-motion-skip="true"] [data-motion] {
  transition: none !important;
  animation: none !important;
}

/* ========= Standard formatting (Rank Utah baseline) ========= */

/* Pill buttons + consistent sizing */
.ui-btn {
  border-radius: 9999px !important;
  font-size: 1rem !important;
  padding: 0.9rem 1.35rem !important;
  line-height: 1.15 !important;
}

/* Brand color helpers (supports config-driven hex/CSS colors) */
.cp-brand-link {
  color: var(--cp-brand);
}
.cp-brand-link:hover {
  color: var(--cp-brand-hover);
}
.cp-brand-hover:hover {
  color: var(--cp-brand);
}

.cp-brand-btn {
  background-color: var(--cp-brand);
  color: #ffffff;
}
.cp-brand-btn:hover {
  background-color: var(--cp-brand-hover);
}
.cp-brand-btn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 4px var(--cp-brand-ring);
}

.cp-focus-brand:focus,
.cp-focus-brand:focus-visible {
  outline: none;
  border-color: var(--cp-brand);
  box-shadow: 0 0 0 4px var(--cp-brand-ring);
}

/* Prevent accidental horizontal scroll (sitewide)
   Some full-bleed patterns use 100vw + negative margins and can create a 1–2px horizontal overflow.
*/
html,
body {
  overflow-x: clip;
}

@supports not (overflow: clip) {
  html,
  body {
    overflow-x: hidden;
  }
}

/* Floating message button sizing (sitewide) */
.cp-fab {
  font-size: 1rem !important;
  line-height: 1.15 !important;
}

@media (min-width: 768px) {
  .cp-fab {
    padding-left: 1.35rem !important;
    padding-right: 1.35rem !important;
    padding-top: 0.9rem !important;
    padding-bottom: 0.9rem !important;
  }
}

/* Pill search bar (navbar + search page) */
#nav-search,
#search-input {
  border-radius: 9999px !important;
}

/* Larger nav menu links */
nav .brand-link {
  font-size: clamp(1rem, 0.95rem + 0.4vw, 1.35rem);
  line-height: 1.25;
}

/* Ensure navbar hover brand class wins over inherited colors */
nav .cp-brand-hover:hover {
  color: var(--cp-brand);
}

/* Wider navbar container
   Note: only apply the legacy 90rem cap when the navbar wrapper does NOT explicitly opt into full width.
   The navbar partial uses `max-w-none` when we want true edge-to-edge spreading on wide screens.
*/
nav > div:not(.max-w-none) {
  max-width: min(100%, 90rem) !important;
}

/* Footer should match main text size (not prose-sm) */
.footer .prose {
  font-size: 1rem;
  line-height: 1.75;
}

nav #nav-search {
  width: clamp(7.75rem, 9vw, 13rem) !important;
  font-size: 1.05rem !important;
  padding-top: 0.65rem !important;
  padding-bottom: 0.65rem !important;
  padding-right: 0.85rem !important;
}

/* Nav CTA should give up space on smaller desktops */
nav .ui-btn {
  padding: 0.75rem 1.1rem !important;
}

@media (min-width: 1024px) {
  nav .ui-btn {
    padding: 0.9rem 1.35rem !important;
  }
}

#search-input {
  font-size: 1.05rem !important;
  padding-top: 0.65rem !important;
  padding-bottom: 0.65rem !important;
}

/* Larger headings (sitewide) */
main#content .prose h1,
main#content h1 {
  font-size: clamp(2.75rem, 6vw, 4.75rem);
  line-height: 1.05;
}

main#content .prose h2,
main#content h2 {
  font-size: clamp(2.1rem, 4.4vw, 3.6rem);
  line-height: 1.12;
}

main#content .prose h3,
main#content h3 {
  font-size: clamp(1.65rem, 3.6vw, 2.9rem);
  line-height: 1.18;
}

main#content .prose h4,
main#content h4 {
	font-size: clamp(1.25rem, 1.1vw + 1.05rem, 1.65rem);
	line-height: 1.25;
}

/* FAQs use heading tags for accordion titles; keep them readable (not huge). */
main#content [data-accordion] :where(h2, h3, h4, h5, h6) {
	font-size: clamp(1.05rem, 0.35vw + 0.98rem, 1.25rem);
	line-height: 1.3;
}

/* ========== 4) Typography touch-ups ========== */
/* .prose a { text-decoration: none; } */
.prose img { max-width: 100%; height: auto; }

/* Ensure images inside column shortcodes never overflow their container */
.cols-auto img,
.cols-auto picture,
.cols-auto picture img {
  display: block;
  max-width: 100%;
  height: auto;
}

/* Floating action button safe-area positioning and mobile sizing */
.cp-fab { position: fixed; right: 1rem; bottom: 1rem; z-index: 50; transform: translateZ(0); backface-visibility: hidden; will-change: transform; }
@supports (right: env(safe-area-inset-right)) {
  .cp-fab { right: calc(1rem + env(safe-area-inset-right)); bottom: calc(1rem + env(safe-area-inset-bottom)); }
}
@media (max-width: 767.98px) {
  .cp-fab.cp-fab--icon-only-mobile { width: 3rem; height: 3rem; padding: 0; }
}

/* Scoped safety: constrain media within main content only (avoid navbar/logo) */
main#content img,
main#content picture,
main#content video {
  max-width: 100%;
  height: auto;
}

/* ========== 5) Fluid auto-fit grid (no breakpoints) ========== */
/* Auto-fit columns with independent column/row gaps */
.cols-auto{
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(min(100%, var(--min, 16rem)), 1fr));
  column-gap: var(--gap, 1.5rem);             /* X gap */
  row-gap: var(--row, var(--gap, 1.5rem));    /* Y gap defaults to X gap */
  align-items: var(--v, start);               /* start | center | end | stretch */
}
.prose .cols-auto + .cols-auto {
  margin-top: var(--gap, 1.5rem);
}
.cols-auto.v-center  { --v: center; }
.cols-auto.v-end     { --v: end; }
.cols-auto.v-stretch { --v: stretch; }

/* Mobile-only reverse order for two-column stacks: move last child to top on mobile, restore order on md+ */
.cols-auto.cols-reverse-mobile > * { order: 2; }
.cols-auto.cols-reverse-mobile > *:last-child { order: 1; }
@media (min-width: 768px) {
  .cols-auto.cols-reverse-mobile > * { order: 0; }
}


/* ========== 6) Universal text alignment (handy inside .prose) ========== */
.left, .prose .left     { text-align: left;  display: block; margin-inline: 0; }
.center, .prose .center { text-align: center; display: block; margin-inline: auto; }
.right, .prose .right   { text-align: right; display: block; margin-left: auto; margin-right: 0; }

/* ========== 7) Vertical alignment inside a box (section/stack use these) ========== */
.vtop    { display: flex; flex-direction: column; justify-content: flex-start; min-height: 100%; }
.vcenter { display: flex; flex-direction: column; justify-content: center;      min-height: 100%; }
.vbottom { display: flex; flex-direction: column; justify-content: flex-end;    min-height: 100%; }

/* Per-item vertical alignment (for children in grid/flex rows) */
.self-vtop    { align-self: flex-start; }
.self-vcenter { align-self: center; }
.self-vbottom { align-self: flex-end; }

/* Convenience */
.center-block { display: block; margin-inline: auto; }
.centerable   { display: block; }
.center .centerable { margin-inline: auto; }
.right  .centerable { margin-left: auto; }

/* ========== 8) NEW: item centering knobs (grid OR flex) ========== */
/* On containers */
.ji-left    { justify-items: start; }
.ji-center  { justify-items: center; }
.ji-right   { justify-items: end; }
.ji-stretch { justify-items: stretch; }

.ai-top     { align-items: start; }
.ai-center  { align-items: center; }
.ai-end     { align-items: end; }
.ai-stretch { align-items: stretch; }

/* On individual items (grid) */
.self-left    { justify-self: start; }
.self-center  { justify-self: center; }
.self-right   { justify-self: end; }
.self-stretch { justify-self: stretch; }
.self-top     { align-self: start; }
.self-end     { align-self: end; }



@layer utilities {
  /* link-brand: color now comes from server-side classes; keep consistent underline */
  a.link-brand { text-decoration: underline; }
  a.link-brand:hover { text-decoration: underline; }
}

/* Ensure prose H1 uses the same vertical rhythm as H2 (some themes reset H1 margins) */
.prose h1 { margin-top: 0; margin-bottom: 0.5em; }
.prose h1 + p { margin-top: 0.25em; }

/* (Removed) Typography rhythm controls: deleted due to conflicts with FAQs/tables */

/* Compensate for the sticky header so the first page element isn't hidden/too close to the nav */
/* Default top spacing. Since the navbar is `position: sticky` (in-flow), content does not need
   header-height padding to avoid being hidden under it. */
main#content { padding-top: var(--site-content-pad-top, 4rem); }

/* Hero pages: remove extra top padding so the hero starts immediately after the navbar. */
main#content.no-top-pad {
  padding-top: 0 !important;
  margin-top: 0 !important;
  display: flow-root; /* stop margin collapse */
}
/* Also ensure no top margin sneaks in from first children */
main#content.no-top-pad > article { margin-top: 0 !important; }
main#content.no-top-pad > article > :first-child { margin-top: 0 !important; }

/* If a hero is marked as mobile-bleed, make it edge-to-edge on small screens even when nested in a padded/max-width wrapper. */
@media (max-width: 767.98px) {
  .section.hero.mobile-bleed {
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw);
    width: 100vw;
    max-width: 100vw;
    overflow-x: clip;
  }

  /* Hero overlay safety:
     If the overlay is tall on mobile, top-align it and keep a safe top padding. */
  .section.hero .hero-overlay-center {
    align-items: flex-start;
    /* Give a pleasant "upper third" gap, but shrink it on short viewports. */
    padding-top: calc(env(safe-area-inset-top) + clamp(1rem, 6vh, 4rem));
    padding-bottom: 1rem;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
}

/* Hero overlay fit wrapper: used by a tiny runtime to scale overlay content down on small screens
   only when it would otherwise overflow its image container. */
.section.hero .hero-overlay-fit {
  transform-origin: top center;
  will-change: transform;
}

/* ========== Contact form placeholders & checkbox (unified) ========== */
/* Scoped to .cp-contact so it only affects forms that use that class. */
.cp-contact input[type="text"]::placeholder,
.cp-contact input[type="email"]::placeholder,
.cp-contact input[type="tel"]::placeholder,
.cp-contact input[type="search"]::placeholder,
.cp-contact input[type="url"]::placeholder,
.cp-contact input[type="password"]::placeholder,
.cp-contact textarea::placeholder {
  color: #9ca3af !important; /* lighter placeholder */
  opacity: 1 !important;
}

/* ========== Motion (opt-in per site) ========== */
/*
  This is intentionally lightweight and safe:
  - Nothing animates unless JS sets html[data-motion-ready="true"].
  - Respects prefers-reduced-motion.
*/

html[data-motion-ready="true"] [data-motion="reveal"] {
  opacity: 0;
  transform: translate3d(0, 18px, 0);
  transition-property: opacity, transform;
  transition-duration: 2200ms;
  transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
  will-change: opacity, transform;
}

/* Fade-only helper: no slide (useful for hero text lines). */
html[data-motion-ready="true"] .section.hero .motion-fade[data-motion="reveal"],
html[data-motion-pending="true"] .section.hero .motion-fade[data-motion="reveal"] {
  transform: none;
}

/* H2s slide in from left/right instead of up */
html[data-motion-ready="true"] main#content h2[data-motion="reveal"] {
  transform: translate3d(-64px, 0, 0);
}
html[data-motion-ready="true"] main#content h2[data-motion="reveal"]:nth-of-type(even) {
  transform: translate3d(64px, 0, 0);
}

/* Hero text lines should fade only (no left/right slide). */
html[data-motion-ready="true"] main#content .section.hero h2.motion-fade[data-motion="reveal"],
html[data-motion-pending="true"] main#content .section.hero h2.motion-fade[data-motion="reveal"] {
  transform: none;
}

/* Ensure H2s always settle back to aligned position when revealed */
html[data-motion-ready="true"] main#content h2[data-motion="reveal"].is-visible,
html[data-motion-ready="true"] main#content h2[data-motion="reveal"].is-visible:nth-of-type(even) {
  transform: none;
}

/* Pending state: prevent initial flash before motion.js runs */
html[data-motion-pending="true"] [data-motion="reveal"] {
  opacity: 0;
  transform: translate3d(0, 18px, 0);
  transition: none !important;
}

html[data-motion-pending="true"] main#content h2[data-motion="reveal"] {
  transform: translate3d(-64px, 0, 0);
}
html[data-motion-pending="true"] main#content h2[data-motion="reveal"]:nth-of-type(even) {
  transform: translate3d(64px, 0, 0);
}

html[data-motion-ready="true"] [data-motion="reveal"].is-visible {
  opacity: 1;
  transform: none;
}

html[data-motion-ready="true"] [data-motion="hero"] {
  opacity: 0;
  /* Keep the overlay container mostly stable; animate the H1/CTAs instead. */
  transform: none;
  transition: opacity 1700ms cubic-bezier(0.22, 1, 0.36, 1);
}

html[data-motion-pending="true"] [data-motion="hero"] {
  opacity: 0;
  transition: none !important;
}

html[data-motion-ready="true"] [data-motion="hero"].is-visible {
  opacity: 1;
  transform: none;
}

/* Hero title + CTAs: staggered entrance */
html[data-motion-ready="true"] .section.hero [data-motion="hero"] h1,
html[data-motion-ready="true"] .section.hero [data-motion="hero"] .ui-btn {
  opacity: 0;
  transform: translate3d(0, 16px, 0);
  transition-property: opacity, transform;
  transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
  will-change: opacity, transform;
}

html[data-motion-pending="true"] .section.hero [data-motion="hero"] h1,
html[data-motion-pending="true"] .section.hero [data-motion="hero"] .ui-btn {
  opacity: 0;
  transform: translate3d(0, 16px, 0);
  transition: none !important;
}

html[data-motion-ready="true"] .section.hero [data-motion="hero"].is-visible h1 {
  opacity: 1;
  transform: none;
  transition-duration: 2400ms;
  transition-delay: 300ms;
}

html[data-motion-ready="true"] .section.hero [data-motion="hero"].is-visible .ui-btn {
  opacity: 1;
  transform: none;
  transition-duration: 2200ms;
  transition-delay: 900ms;
}

/* CTAs enter together (no per-button stagger) */

/* Hero image entrance (subtle “cinematic” settle-in) */
html[data-motion-ready="true"] [data-motion="hero-img"] {
  --hero-img-scale: 1.08;
  --hero-img-ty: 0px;
  transform: translate3d(0, var(--hero-img-ty, 0px), 0) scale(var(--hero-img-scale, 1));
  transition: transform 4200ms cubic-bezier(0.22, 1, 0.36, 1);
  will-change: transform;
}

html[data-motion-pending="true"] [data-motion="hero-img"] {
  --hero-img-scale: 1.08;
  --hero-img-ty: 0px;
  transform: translate3d(0, var(--hero-img-ty, 0px), 0) scale(var(--hero-img-scale, 1));
  transition: none !important;
  will-change: transform;
}

html[data-motion-ready="true"] [data-motion="hero-img"].is-visible {
  --hero-img-scale: 1;
}

@media (hover: hover) {
  /* Keep hover micro-interactions (non-continuous) */
}

/* Skip only the hero entrance on repeat visits (scroll reveals still run). */
html[data-motion-skip-hero="true"] .section.hero [data-motion="hero"],
html[data-motion-skip-hero="true"] .section.hero [data-motion="hero"] h1,
html[data-motion-skip-hero="true"] .section.hero [data-motion="hero"] .ui-btn,
html[data-motion-skip-hero="true"] [data-motion="hero-img"] {
  opacity: 1 !important;
  transform: none !important;
  filter: none !important;
  transition: none !important;
}

/* Cards & tiles: lift on hover for extra motion */
@media (hover: hover) {
  /* Only apply hover-lift to card-like blocks (not headings like H2/H3). */
  html[data-motion-enabled="true"] [data-motion-group="stagger"]:not(.cols-auto) > [data-motion="reveal"].is-visible {
    transition-property: opacity, transform, filter, box-shadow;
    transition-duration: 2200ms, 2200ms, 2200ms, 180ms;
    transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
  }
  html[data-motion-enabled="true"] [data-motion-group="stagger"]:not(.cols-auto) > [data-motion="reveal"].is-visible:hover {
    transition-duration: 2200ms, 180ms, 2200ms, 180ms;
    transform: translate3d(0, -8px, 0);
    box-shadow: 0 16px 38px rgba(0,0,0,0.18);
  }

  /* Cols: only card="true" columns get hover lift/highlight. */
  html[data-motion-enabled="true"] .cols-auto > [data-motion="reveal"][data-card="true"].is-visible {
    transition-property: opacity, transform, filter, box-shadow;
    transition-duration: 2200ms, 2200ms, 2200ms, 180ms;
    transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
  }
  html[data-motion-enabled="true"] .cols-auto > [data-motion="reveal"][data-card="true"].is-visible:hover {
    transition-duration: 2200ms, 180ms, 2200ms, 180ms;
    transform: translate3d(0, -8px, 0);
    box-shadow: 0 16px 38px rgba(0,0,0,0.18);
  }
}

/* Buttons: a bit more “alive” */
html[data-motion-enabled="true"] .ui-btn {
  transition: transform 260ms cubic-bezier(0.22, 1, 0.36, 1), box-shadow 360ms cubic-bezier(0.22, 1, 0.36, 1);
  will-change: transform;
}

/* Hero: larger CTA buttons (hero only) */
.section.hero a.ui-btn,
.section.hero button.ui-btn {
  font-size: 1.2rem !important;
  padding: 0.92rem 1.75rem !important;
  line-height: 1.15 !important;
}

@media (min-width: 768px) {
  .section.hero a.ui-btn,
  .section.hero button.ui-btn {
    font-size: 1.25rem !important;
    padding: 1.0rem 2rem !important;
  }
}

@media (hover: hover) {
  html[data-motion-enabled="true"] .ui-btn:hover {
    transform: translate3d(0, -2px, 0);
    box-shadow: 0 14px 26px rgba(0,0,0,0.22);
  }
}

/* Card hover lift is enabled via the default motion hover rules above. */

html[data-motion-enabled="true"] .ui-btn:active {
  transform: translate3d(0, 0, 0) scale(0.98);
}

@media (prefers-reduced-motion: reduce) {
  html[data-motion-ready="true"] [data-motion] {
    opacity: 1 !important;
    transform: none !important;
    transition: none !important;
    animation: none !important;
  }
}

.cp-contact input[type="text"],
.cp-contact input[type="email"],
.cp-contact input[type="tel"],
.cp-contact input[type="search"],
.cp-contact input[type="url"],
.cp-contact input[type="password"],
.cp-contact textarea {
  color: #111827 !important;
}

/* Dark mode: placeholder should be softened, typed text should be near-white */
.dark .cp-contact input[type="text"]::placeholder,
.dark .cp-contact input[type="email"]::placeholder,
.dark .cp-contact input[type="tel"]::placeholder,
.dark .cp-contact input[type="search"]::placeholder,
.dark .cp-contact input[type="url"]::placeholder,
.dark .cp-contact input[type="password"]::placeholder,
.dark .cp-contact textarea::placeholder {
  color: #9ca3af !important; /* softened placeholder in dark mode */
  opacity: 1 !important;
}

.dark .cp-contact input[type="text"],
.dark .cp-contact input[type="email"],
.dark .cp-contact input[type="tel"],
.dark .cp-contact input[type="search"],
.dark .cp-contact input[type="url"],
.dark .cp-contact input[type="password"],
.dark .cp-contact textarea {
  color: #f8fafc !important; /* near-white for entered text in dark mode */
}

/* Dark mode placeholders (OS-level) */
@media (prefers-color-scheme: dark) {
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="text"]::placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="email"]::placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="tel"]::placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="search"]::placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="url"]::placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="password"]::placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact textarea::placeholder {
    color: #9ca3af !important;
    opacity: 1 !important;
  }
}

/* Vendor-prefixed fallbacks */
.cp-contact input[type="text"]::-webkit-input-placeholder,
.cp-contact input[type="email"]::-webkit-input-placeholder,
.cp-contact input[type="tel"]::-webkit-input-placeholder,
.cp-contact input[type="search"]::-webkit-input-placeholder,
.cp-contact input[type="url"]::-webkit-input-placeholder,
.cp-contact input[type="password"]::-webkit-input-placeholder,
.cp-contact input[type="text"]::-webkit-input-placeholder,
.cp-contact input[type="email"]::-webkit-input-placeholder,
.cp-contact input[type="tel"]::-webkit-input-placeholder,
.cp-contact input[type="search"]::-webkit-input-placeholder,
.cp-contact input[type="url"]::-webkit-input-placeholder,
.cp-contact input[type="password"]::-webkit-input-placeholder,
.cp-contact textarea::-webkit-input-placeholder { color: #9ca3af !important; opacity: 1 !important; }
.cp-contact input[type="text"]::-moz-placeholder,
.cp-contact input[type="email"]::-moz-placeholder,
.cp-contact input[type="tel"]::-moz-placeholder,
.cp-contact input[type="search"]::-moz-placeholder,
.cp-contact input[type="url"]::-moz-placeholder,
.cp-contact input[type="password"]::-moz-placeholder,
.cp-contact textarea::-moz-placeholder { color: #9ca3af !important; opacity: 1 !important; }

/* Vendor-prefixed dark-mode placeholder fallbacks */
.dark .cp-contact input[type="text"]::-webkit-input-placeholder,
.dark .cp-contact input[type="email"]::-webkit-input-placeholder,
.dark .cp-contact input[type="tel"]::-webkit-input-placeholder,
.dark .cp-contact input[type="search"]::-webkit-input-placeholder,
.dark .cp-contact input[type="url"]::-webkit-input-placeholder,
.dark .cp-contact input[type="password"]::-webkit-input-placeholder,
.dark .cp-contact textarea::-webkit-input-placeholder { color: #9ca3af !important; opacity: 1 !important; }
.dark .cp-contact input[type="text"]::-moz-placeholder,
.dark .cp-contact input[type="email"]::-moz-placeholder,
.dark .cp-contact input[type="tel"]::-moz-placeholder,
.dark .cp-contact input[type="search"]::-moz-placeholder,
.dark .cp-contact input[type="url"]::-moz-placeholder,
.dark .cp-contact input[type="password"]::-moz-placeholder,
.dark .cp-contact textarea::-moz-placeholder { color: #9ca3af !important; opacity: 1 !important; }

/* Checkbox accent + fallback */
.cp-contact input[type="checkbox"] { accent-color: currentColor !important; }
.cp-contact input[type="checkbox"]:checked { background-color: currentColor !important; border-color: currentColor !important; }

/* Reinforce dark-mode colors for browsers that use prefers-color-scheme instead of a `.dark` class.
   Place this at the end so it wins over earlier prefers-color-scheme blocks in compiled bundles. */
@media (prefers-color-scheme: dark) {
  /* Ensure entered text is near-white for readability */
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="text"],
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="email"],
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="tel"],
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="search"],
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="url"],
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="password"],
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact textarea {
    color: #f8fafc !important;
  }

  /* Muted, readable placeholder in dark mode (not pure white) */
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="text"]::placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="email"]::placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="tel"]::placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="search"]::placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="url"]::placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="password"]::placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact textarea::placeholder,
  /* vendor-prefixed */
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="text"]::-webkit-input-placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="email"]::-webkit-input-placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="tel"]::-webkit-input-placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="search"]::-webkit-input-placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="url"]::-webkit-input-placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="password"]::-webkit-input-placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact textarea::-webkit-input-placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="text"]::-moz-placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="email"]::-moz-placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="tel"]::-moz-placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="search"]::-moz-placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="url"]::-moz-placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact input[type="password"]::-moz-placeholder,
  html:not([data-force-theme="light"]):not([data-theme="light"]) .cp-contact textarea::-moz-placeholder {
    color: #9ca3af !important;
    opacity: 1 !important;
  }
}

/* ===== FINAL ENFORCEMENT (after Tailwind layers expansion) =====
   Some build orders can place Tailwind utilities after our earlier rules.
   These selectors intentionally add slight specificity + come LAST so that
   dark mode always shows white typed text while placeholders stay #9ca3af. */
@layer utilities {
  :is(.dark, [data-theme="dark"]) .cp-contact input[type="text"],
  :is(.dark, [data-theme="dark"]) .cp-contact input[type="email"],
  :is(.dark, [data-theme="dark"]) .cp-contact input[type="tel"],
  :is(.dark, [data-theme="dark"]) .cp-contact input[type="search"],
  :is(.dark, [data-theme="dark"]) .cp-contact input[type="url"],
  :is(.dark, [data-theme="dark"]) .cp-contact input[type="password"],
  :is(.dark, [data-theme="dark"]) .cp-contact textarea { color: #f8fafc !important; }

  /* Placeholders unified for both modes already (#9ca3af); repeat once more to win any late utilities */
  .cp-contact input[type="text"]::placeholder,
  .cp-contact input[type="email"]::placeholder,
  .cp-contact input[type="tel"]::placeholder,
  .cp-contact input[type="search"]::placeholder,
  .cp-contact input[type="url"]::placeholder,
  .cp-contact input[type="password"]::placeholder,
  .cp-contact textarea::placeholder { color: #9ca3af !important; opacity: 1 !important; }

  /* Responsive height helpers for components like the carousel */
  /* Note: no base rule so mobile classes like h-64 remain effective */
  @media (min-width: 768px) { .h-md-70vh { height: 70vh !important; } }
  @media (min-width: 1024px) { .h-lg-80vh { height: 80vh !important; } }
}

/* ========== Smooth scrolling & anchor offset ========== */
/* Prefer smooth scrolling for hash links. Respect reduced motion preferences. */
html { scroll-behavior: smooth; }
@media (prefers-reduced-motion: reduce) {
  html { scroll-behavior: auto; }
}
/* Ensure anchored headings don't tuck under the sticky header. Uses CSS var fallback. */
:where(h1,h2,h3,h4,h5,h6)[id],
:target {
  scroll-margin-top: calc(var(--site-header-h, 64px) + 16px);
}

/* Prevent mobile scroll jumps when accordions expand/collapse (scroll anchoring). */
[data-accordion] { overflow-anchor: none; }

/* FAQ accordion: plus icon rotates to an X when expanded */
#accordion-collapse [data-accordion-target] .cp-faq-toggle-icon {
  transform: rotate(0deg);
  transition: transform 0.2s ease;
  will-change: transform;
}

#accordion-collapse [data-accordion-target][aria-expanded="true"] .cp-faq-toggle-icon {
  transform: rotate(45deg);
}
