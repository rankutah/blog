/* ========== 1) Tailwind v4 layers (uses tailwind.config.cjs) ========== */
@import "tailwindcss";

/* ========== 2) Flowbite’s shipped CSS (shadows, transitions, etc.) ========== */
@import "flowbite/dist/flowbite.css";

@plugin "@tailwindcss/typography";
@plugin "flowbite/plugin";

/* ========== 3) PaperMod/menu tweak (safe to remove if/when you drop PaperMod) ========== */
.header .nav #menu li > a > span + svg,
.header .nav #menu li > a svg.ml-1.inline-block.flex-shrink-0 {
  display: none !important;
}

/* ===== ULTIMATE OVERRIDE (plain CSS, keep at physical end of file) =====
  Ensures our desired colors are not reordered by Tailwind's layer processing.
  Goal: Placeholder same in light/dark (#9ca3af); typed text white in dark mode, dark slate in light.
*/
.cp-contact input[type="text"],
.cp-contact input[type="email"],
.cp-contact input[type="tel"],
.cp-contact input[type="search"],
.cp-contact input[type="url"],
.cp-contact input[type="password"],
.cp-contact textarea { color: #111827 !important; }

/* Unified placeholder both modes */
.cp-contact input[type="text"]::placeholder,
.cp-contact input[type="email"]::placeholder,
.cp-contact input[type="tel"]::placeholder,
.cp-contact input[type="search"]::placeholder,
.cp-contact input[type="url"]::placeholder,
.cp-contact input[type="password"]::placeholder,
.cp-contact textarea::placeholder { color: #9ca3af !important; opacity: 1 !important; }

/* Dark mode text color enforcement (covers .dark class or data-theme attr) */
.dark .cp-contact input[type="text"],
.dark .cp-contact input[type="email"],
.dark .cp-contact input[type="tel"],
.dark .cp-contact input[type="search"],
.dark .cp-contact input[type="url"],
.dark .cp-contact input[type="password"],
.dark .cp-contact textarea,
[data-theme="dark"] .cp-contact input[type="text"],
[data-theme="dark"] .cp-contact input[type="email"],
[data-theme="dark"] .cp-contact input[type="tel"],
[data-theme="dark"] .cp-contact input[type="search"],
[data-theme="dark"] .cp-contact input[type="url"],
[data-theme="dark"] .cp-contact input[type="password"],
[data-theme="dark"] .cp-contact textarea { color: #ffffff !important; }

/* Scroll-to-top link (PaperMod default) — ensure sane size/position/hidden initial state */
.top-link {
  position: fixed;
  right: 1rem;
  bottom: 1rem;
  width: 2.75rem;
  height: 2.75rem;
  border-radius: 9999px; /* full */
  display: grid;
  place-items: center;
  background-color: #111827; /* gray-900 */
  color: #f9fafb; /* gray-50 */
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
  opacity: 0;
  visibility: hidden;
  transition: opacity .2s ease, visibility .2s ease, transform .2s ease;
  transform: translateY(8px);
  z-index: 60;
}
.dark .top-link {
  background-color: #374151; /* gray-700 */
  color: #e5e7eb; /* gray-200 */
}
.top-link:hover { transform: translateY(0); }
.top-link svg { width: 1rem; height: 1rem; display: block; }

/* Footer styling: subtle divider + spacing + centered width */
.footer {
  margin-top: 1.5rem;
  padding: 1rem 1rem; /* tighter top/bottom */
  /* Darken divider in light mode so it doesn't blend with light bg */
  border-top: 1px solid #4b5563; /* gray-600 */
}


.dark .footer { border-top-color: #374151; /* gray-700 */ }
.footer .prose {
  max-width: 72rem !important; /* ~1152px */
  margin-left: auto;
  margin-right: auto;
}
.footer .prose > :first-child { margin-top: 0 !important; }
/* underline only normal text links; do not underline button-style anchors */
.footer .prose a:not(.not-prose):not(.ui-btn):not(.no-underline) { text-decoration: underline; }


/* Make list markers match the current text color */
.prose :where(ul > li)::marker { color: currentColor; }
.prose :where(ol > li)::marker { color: currentColor; }

/* ========== 4) Typography touch-ups ========== */
/* .prose a { text-decoration: none; } */
.prose img { max-width: 100%; height: auto; }

/* ========== 5) Fluid auto-fit grid (no breakpoints) ========== */
/* Auto-fit columns with independent column/row gaps */
.cols-auto{
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--min, 16rem), 1fr));
  column-gap: var(--gap, 1.5rem);             /* X gap */
  row-gap: var(--row, var(--gap, 1.5rem));    /* Y gap defaults to X gap */
  align-items: var(--v, start);               /* start | center | end | stretch */
}
.cols-auto.v-center  { --v: center; }
.cols-auto.v-end     { --v: end; }
.cols-auto.v-stretch { --v: stretch; }

/* Mobile-only reverse order for two-column stacks: move last child to top on mobile, restore order on md+ */
.cols-auto.cols-reverse-mobile > * { order: 2; }
.cols-auto.cols-reverse-mobile > *:last-child { order: 1; }
@media (min-width: 768px) {
  .cols-auto.cols-reverse-mobile > * { order: 0; }
}


/* ========== 6) Universal text alignment (handy inside .prose) ========== */
.left, .prose .left     { text-align: left;  display: block; margin-inline: 0; }
.center, .prose .center { text-align: center; display: block; margin-inline: auto; }
.right, .prose .right   { text-align: right; display: block; margin-left: auto; margin-right: 0; }

/* ========== 7) Vertical alignment inside a box (section/stack use these) ========== */
.vtop    { display: flex; flex-direction: column; justify-content: flex-start; min-height: 100%; }
.vcenter { display: flex; flex-direction: column; justify-content: center;      min-height: 100%; }
.vbottom { display: flex; flex-direction: column; justify-content: flex-end;    min-height: 100%; }

/* Per-item vertical alignment (for children in grid/flex rows) */
.self-vtop    { align-self: flex-start; }
.self-vcenter { align-self: center; }
.self-vbottom { align-self: flex-end; }

/* Convenience */
.center-block { display: block; margin-inline: auto; }
.centerable   { display: block; }
.center .centerable { margin-inline: auto; }
.right  .centerable { margin-left: auto; }

/* ========== 8) NEW: item centering knobs (grid OR flex) ========== */
/* On containers */
.ji-left    { justify-items: start; }
.ji-center  { justify-items: center; }
.ji-right   { justify-items: end; }
.ji-stretch { justify-items: stretch; }

.ai-top     { align-items: start; }
.ai-center  { align-items: center; }
.ai-end     { align-items: end; }
.ai-stretch { align-items: stretch; }

/* On individual items (grid) */
.self-left    { justify-self: start; }
.self-center  { justify-self: center; }
.self-right   { justify-self: end; }
.self-stretch { justify-self: stretch; }
.self-top     { align-self: start; }
.self-end     { align-self: end; }



@layer utilities {
  /* link-brand: color now comes from server-side classes; keep consistent underline */
  a.link-brand { text-decoration: underline; }
  a.link-brand:hover { text-decoration: underline; }
}

/* Ensure prose H1 uses the same vertical rhythm as H2 (some themes reset H1 margins) */
.prose h1 { margin-top: 0; margin-bottom: 0.5em; }
.prose h1 + p { margin-top: 0.25em; }

/* Compensate for the sticky header so the first page element isn't hidden/too close to the nav */
/* Default top spacing to clear a sticky header */
main#content { padding-top: 4rem; }

/* If the page starts with a full-bleed hero/section, remove the extra padding so the hero sits flush under the nav.
   Use :has() in supporting browsers for automatic detection; fallback is the manual `.no-top-pad` class on main. */
@supports selector(:has) {
  /* If any hero/bleed section exists inside main (even nested in article), remove extra top pad */
  main#content:has(.hero),
  main#content:has(.section.bleed),
  main#content:has(.relative > img),
  main#content:has(.relative > picture) {
    padding-top: 0 !important;
    /* Prevent margin-collapsing from first child creating a visible gap */
    display: flow-root;
  }
}

/* Manual override for pages that should start flush under the navbar */
main#content.no-top-pad {
  padding-top: 0 !important;
  display: flow-root; /* stop margin collapse */
  /* Pull the hero up under the sticky header (header height dynamic via --site-header-h) */
  margin-top: calc(var(--site-header-h, 64px) * -1) !important;
}
/* Also ensure no top margin sneaks in from first children */
main#content.no-top-pad > article { margin-top: 0 !important; }
main#content.no-top-pad > article > :first-child { margin-top: 0 !important; }

/* ========== Contact form placeholders & checkbox (unified) ========== */
/* Scoped to .cp-contact so it only affects forms that use that class. */
.cp-contact input[type="text"]::placeholder,
.cp-contact input[type="email"]::placeholder,
.cp-contact input[type="tel"]::placeholder,
.cp-contact input[type="search"]::placeholder,
.cp-contact input[type="url"]::placeholder,
.cp-contact input[type="password"]::placeholder,
.cp-contact textarea::placeholder {
  color: #9ca3af !important; /* lighter placeholder */
  opacity: 1 !important;
}

.cp-contact input[type="text"],
.cp-contact input[type="email"],
.cp-contact input[type="tel"],
.cp-contact input[type="search"],
.cp-contact input[type="url"],
.cp-contact input[type="password"],
.cp-contact textarea {
  color: #111827 !important;
}

/* Dark mode: placeholder should be softened, typed text should be near-white */
.dark .cp-contact input[type="text"]::placeholder,
.dark .cp-contact input[type="email"]::placeholder,
.dark .cp-contact input[type="tel"]::placeholder,
.dark .cp-contact input[type="search"]::placeholder,
.dark .cp-contact input[type="url"]::placeholder,
.dark .cp-contact input[type="password"]::placeholder,
.dark .cp-contact textarea::placeholder {
  color: #9ca3af !important; /* softened placeholder in dark mode */
  opacity: 1 !important;
}

.dark .cp-contact input[type="text"],
.dark .cp-contact input[type="email"],
.dark .cp-contact input[type="tel"],
.dark .cp-contact input[type="search"],
.dark .cp-contact input[type="url"],
.dark .cp-contact input[type="password"],
.dark .cp-contact textarea {
  color: #f8fafc !important; /* near-white for entered text in dark mode */
}

/* Dark mode placeholders (OS-level) */
@media (prefers-color-scheme: dark) {
  .cp-contact input[type="text"]::placeholder,
  .cp-contact input[type="email"]::placeholder,
  .cp-contact input[type="tel"]::placeholder,
  .cp-contact input[type="search"]::placeholder,
  .cp-contact input[type="url"]::placeholder,
  .cp-contact input[type="password"]::placeholder,
  .cp-contact textarea::placeholder {
    color: #9ca3af !important;
    opacity: 1 !important;
  }
}

/* Vendor-prefixed fallbacks */
.cp-contact input[type="text"]::-webkit-input-placeholder,
.cp-contact input[type="email"]::-webkit-input-placeholder,
.cp-contact input[type="tel"]::-webkit-input-placeholder,
.cp-contact input[type="search"]::-webkit-input-placeholder,
.cp-contact input[type="url"]::-webkit-input-placeholder,
.cp-contact input[type="password"]::-webkit-input-placeholder,
.cp-contact input[type="text"]::-webkit-input-placeholder,
.cp-contact input[type="email"]::-webkit-input-placeholder,
.cp-contact input[type="tel"]::-webkit-input-placeholder,
.cp-contact input[type="search"]::-webkit-input-placeholder,
.cp-contact input[type="url"]::-webkit-input-placeholder,
.cp-contact input[type="password"]::-webkit-input-placeholder,
.cp-contact textarea::-webkit-input-placeholder { color: #9ca3af !important; opacity: 1 !important; }
.cp-contact input[type="text"]::-moz-placeholder,
.cp-contact input[type="email"]::-moz-placeholder,
.cp-contact input[type="tel"]::-moz-placeholder,
.cp-contact input[type="search"]::-moz-placeholder,
.cp-contact input[type="url"]::-moz-placeholder,
.cp-contact input[type="password"]::-moz-placeholder,
.cp-contact textarea::-moz-placeholder { color: #9ca3af !important; opacity: 1 !important; }

/* Vendor-prefixed dark-mode placeholder fallbacks */
.dark .cp-contact input[type="text"]::-webkit-input-placeholder,
.dark .cp-contact input[type="email"]::-webkit-input-placeholder,
.dark .cp-contact input[type="tel"]::-webkit-input-placeholder,
.dark .cp-contact input[type="search"]::-webkit-input-placeholder,
.dark .cp-contact input[type="url"]::-webkit-input-placeholder,
.dark .cp-contact input[type="password"]::-webkit-input-placeholder,
.dark .cp-contact textarea::-webkit-input-placeholder { color: #9ca3af !important; opacity: 1 !important; }
.dark .cp-contact input[type="text"]::-moz-placeholder,
.dark .cp-contact input[type="email"]::-moz-placeholder,
.dark .cp-contact input[type="tel"]::-moz-placeholder,
.dark .cp-contact input[type="search"]::-moz-placeholder,
.dark .cp-contact input[type="url"]::-moz-placeholder,
.dark .cp-contact input[type="password"]::-moz-placeholder,
.dark .cp-contact textarea::-moz-placeholder { color: #9ca3af !important; opacity: 1 !important; }

/* Checkbox accent + fallback */
.cp-contact input[type="checkbox"] { accent-color: currentColor !important; }
.cp-contact input[type="checkbox"]:checked { background-color: currentColor !important; border-color: currentColor !important; }

/* Reinforce dark-mode colors for browsers that use prefers-color-scheme instead of a `.dark` class.
   Place this at the end so it wins over earlier prefers-color-scheme blocks in compiled bundles. */
@media (prefers-color-scheme: dark) {
  /* Ensure entered text is near-white for readability */
  .cp-contact input[type="text"],
  .cp-contact input[type="email"],
  .cp-contact input[type="tel"],
  .cp-contact input[type="search"],
  .cp-contact input[type="url"],
  .cp-contact input[type="password"],
  .cp-contact textarea {
    color: #f8fafc !important;
  }

  /* Muted, readable placeholder in dark mode (not pure white) */
  .cp-contact input[type="text"]::placeholder,
  .cp-contact input[type="email"]::placeholder,
  .cp-contact input[type="tel"]::placeholder,
  .cp-contact input[type="search"]::placeholder,
  .cp-contact input[type="url"]::placeholder,
  .cp-contact input[type="password"]::placeholder,
  .cp-contact textarea::placeholder,
  /* vendor-prefixed */
  .cp-contact input[type="text"]::-webkit-input-placeholder,
  .cp-contact input[type="email"]::-webkit-input-placeholder,
  .cp-contact input[type="tel"]::-webkit-input-placeholder,
  .cp-contact input[type="search"]::-webkit-input-placeholder,
  .cp-contact input[type="url"]::-webkit-input-placeholder,
  .cp-contact input[type="password"]::-webkit-input-placeholder,
  .cp-contact textarea::-webkit-input-placeholder,
  .cp-contact input[type="text"]::-moz-placeholder,
  .cp-contact input[type="email"]::-moz-placeholder,
  .cp-contact input[type="tel"]::-moz-placeholder,
  .cp-contact input[type="search"]::-moz-placeholder,
  .cp-contact input[type="url"]::-moz-placeholder,
  .cp-contact input[type="password"]::-moz-placeholder,
  .cp-contact textarea::-moz-placeholder {
    color: #9ca3af !important;
    opacity: 1 !important;
  }
}

/* ===== FINAL ENFORCEMENT (after Tailwind layers expansion) =====
   Some build orders can place Tailwind utilities after our earlier rules.
   These selectors intentionally add slight specificity + come LAST so that
   dark mode always shows white typed text while placeholders stay #9ca3af. */
@layer utilities {
  :is(.dark, [data-theme="dark"]) .cp-contact input[type="text"],
  :is(.dark, [data-theme="dark"]) .cp-contact input[type="email"],
  :is(.dark, [data-theme="dark"]) .cp-contact input[type="tel"],
  :is(.dark, [data-theme="dark"]) .cp-contact input[type="search"],
  :is(.dark, [data-theme="dark"]) .cp-contact input[type="url"],
  :is(.dark, [data-theme="dark"]) .cp-contact input[type="password"],
  :is(.dark, [data-theme="dark"]) .cp-contact textarea { color: #f8fafc !important; }

  /* Placeholders unified for both modes already (#9ca3af); repeat once more to win any late utilities */
  .cp-contact input[type="text"]::placeholder,
  .cp-contact input[type="email"]::placeholder,
  .cp-contact input[type="tel"]::placeholder,
  .cp-contact input[type="search"]::placeholder,
  .cp-contact input[type="url"]::placeholder,
  .cp-contact input[type="password"]::placeholder,
  .cp-contact textarea::placeholder { color: #9ca3af !important; opacity: 1 !important; }

  /* Responsive height helpers for components like the carousel */
  /* Note: no base rule so mobile classes like h-64 remain effective */
  @media (min-width: 768px) { .h-md-70vh { height: 70vh !important; } }
  @media (min-width: 1024px) { .h-lg-80vh { height: 80vh !important; } }
}

/* ========== Smooth scrolling & anchor offset ========== */
/* Prefer smooth scrolling for hash links. Respect reduced motion preferences. */
html { scroll-behavior: smooth; }
@media (prefers-reduced-motion: reduce) {
  html { scroll-behavior: auto; }
}
/* Ensure anchored headings don't tuck under the sticky header. Uses CSS var fallback. */
:where(h1,h2,h3,h4,h5,h6)[id],
:target {
  scroll-margin-top: calc(var(--site-header-h, 64px) + 16px);
}
